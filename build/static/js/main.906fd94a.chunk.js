(this["webpackJsonpfancy-weather"]=this["webpackJsonpfancy-weather"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports={title_city:"weatherCard_title_city__QhXJr",date:"weatherCard_date__2Bm0D",main_container:"weatherCard_main_container__3v8Aw",temp_wrapper:"weatherCard_temp_wrapper__21r7V",temp:"weatherCard_temp__3qQVm",degree:"weatherCard_degree__2A4Mj",sky_container:"weatherCard_sky_container__-xUDD",description_container:"weatherCard_description_container__1QJwF",description:"weatherCard_description__2GxzJ"}},,,function(e,t,n){e.exports={search_container:"serchInput_search_container__3edhh",search:"serchInput_search__2R01L",search_panel:"serchInput_search_panel__2jx11",search_btn:"serchInput_search_btn__2rX4H"}},,,function(e,t,n){e.exports={lang_menu_wrapper:"toggleLangBtn_lang_menu_wrapper__3xs4X",drop_down_label:"toggleLangBtn_drop_down_label__23YeU",active:"toggleLangBtn_active__1mEPb",drop_down_menu:"toggleLangBtn_drop_down_menu__kiBg2",menu_item:"toggleLangBtn_menu_item__1LWoE"}},function(e,t,n){e.exports={container_app:"app_container_app__31A4t",bg1:"app_bg1__1pVb5",bg2:"app_bg2__31E1M",bg3:"app_bg3__2ldqL",gradient_container:"app_gradient_container__2XNDf",content_container:"app_content_container__T-HgZ"}},function(e,t,n){e.exports={units_container:"unitsbtn_units_container__30AV2",list_wrapper:"unitsbtn_list_wrapper__342BK",item_units:"unitsbtn_item_units__2T0Qt",active:"unitsbtn_active__1bYBn"}},function(e,t,n){e.exports={item_contaner:"weatherItem_item_contaner__ZpOX4",weather_data_wrapper:"weatherItem_weather_data_wrapper__U4kGK",sky_container:"weatherItem_sky_container__3tbNN"}},,,function(e,t,n){e.exports={map_container:"map_map_container__2KeMU",map:"map_map__1Db93"}},,,,,function(e,t,n){e.exports={btn:"toggleBgBtn_btn__1xv4C",btn_refresh:"toggleBgBtn_btn_refresh__1tTQd"}},function(e,t,n){e.exports={loading:"sinner_loading__DIzY7"}},function(e,t,n){e.exports={header_container:"controllers_header_container__349Ne"}},function(e,t,n){e.exports={time:"time_time__1GAYM"}},function(e,t,n){e.exports={weather_list_container:"weatherList_weather_list_container__aOzd5"}},function(e,t,n){e.exports={row_container:"row_row_container__PhYW5"}},,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(5),i=n.n(c),o=n(3),s=n(7),u=n(13),l=n(19),d=n(18),g=n(10),h=n(4),_="FETCH_WEATHER_REQUSTED",p="FETCH_WEATHER_SUCCESS",j="FETCH_WEATHER_FAILURE",b="TOGGLE_RENDER_BG",m="CHANGE_LANG",f="CHANGE_UNITS",x="SEARCH_CITY",O=function(e){return function(t){var n;t((n=e.getBackground(),{type:b,payload:n}))}},A=function(e,t){return function(n){n({type:_}),e.getFullDataWeather(t).then((function(e){return n({type:p,payload:e})})).catch((function(e){return n(function(e){return{type:j,payload:e}}(e))}))}},w=n(15),v=n.n(w),y=n(26),C=n.n(y),L=n(0),S=function(e){return Object(L.jsx)("img",{className:C.a.loading,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAUCAYAAABSx2cSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADxSURBVHgBnVMBEYMwDMxNARIqoRJwsDkYEnAwJMwBc8BNQSWAAyRMQpaOz5F1lOv4u9yRkv/mSSDaATM/JDwdgRADL7iVEmqJO4gvXtFLuBypkhg4jyh03SI6idkURpFGYkQ+Z73jw/wUofUoVCH36KC1HhUuEfVJfjEWKntrT2UfNKC+I+OraJ6m05G0XyoEprJwjN/qD4EPTvI84ay0ba2bIvmJpGwFiVolqwddw3PmFs2dqa31sMWhRx4F+zgWK8TrFm6PNSmKY2zMLjDeuS1iw99/UoohOxV4srdEocDLL1pTCaSwAznQEcD77r6/AaJC1BYAlR8XAAAAAElFTkSuQmCC",alt:"spinner"})},E=n(25),I=n.n(E),N=function(e){var t=e.loading?Object(L.jsx)(S,{}):null;return Object(L.jsx)("button",{onClick:function(){return e.onChangeBg()},className:"".concat(I.a.btn," ").concat(I.a.btn_refresh),children:t})},k=n(6),T=n(14),B=n.n(T),D=function(e){var t=e.id,n=e.title,a=e.isActiveMenu,r=e.setActiveMenu,c=e.changeLang;return Object(L.jsx)("li",{className:B.a.menu_item,onClick:function(){r(!a),c(t)},children:n})},U=Object(h.b)((function(e){return{language:e.language}}),(function(e){return{changeLang:function(t){return e(function(e){return localStorage.setItem("lang",e),{type:m,payload:e}}(t))}}}))((function(e){var t=e.language,n=e.changeLang,r=Object(a.useState)(!1),c=Object(k.a)(r,2),i=c[0],o=c[1],s=i?"active":null,u=t.langList.map((function(e){var t=e.id,a=e.title;return Object(L.jsx)(D,{id:t,title:a,setActiveMenu:o,isActiveMenu:i,changeLang:n},t)})),l=t.currentLang.toLocaleUpperCase();return Object(L.jsxs)("div",{className:"".concat(B.a.lang_menu_wrapper," ").concat(B.a[s]),children:[Object(L.jsxs)("div",{onClick:function(){return o(!i)},className:"".concat(B.a.drop_down_label," "),children:[Object(L.jsx)("span",{children:l}),Object(L.jsx)("div",{children:Object(L.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABbSURBVHgBdY/BCYBADAQTOPz5sgF7sA3t1jYsxQJ8xZ3DRwheYAhshpBYRGxgP6V8Fge9fRmyufuVJbVdTNAYImW5SKeyu28sMsM1S90pN3ErPFmywQNsXWr+AiEdOQion9WWAAAAAElFTkSuQmCC",alt:"stroke"})})]}),Object(L.jsx)("ul",{className:B.a.drop_down_menu,children:u})]})})),M=n(11),R=n.n(M),W=r.a.createContext(),F=Object(h.b)((function(e){return{error:e.error}}),(function(e){return{searchCity:function(t){e(function(e){return{type:x,payload:e}}(t))}}}))((function(e){var t=Object(a.useContext)(W)(e.currentLang),n=t.searchBtnText,r=t.inputPlaceText,c=t.incorrectInputPlaceText,i=Object(a.useState)(""),o=Object(k.a)(i,2),s=o[0],u=o[1],l=Object(a.useState)(r),d=Object(k.a)(l,2),g=d[0],h=d[1];Object(a.useEffect)((function(){e.error?h(c):h(r)}),[e.error,c,r]);return Object(L.jsxs)("div",{className:R.a.search_container,children:[Object(L.jsx)("input",{className:"".concat(R.a.search," ").concat(R.a.search_panel),onChange:function(e){return u(e.target.value)},placeholder:g,maxLength:"21",onKeyPress:function(t){"Enter"===t.code&&(e.searchCity(s),t.target.blur(),u(""))},value:s}),Object(L.jsx)("button",{className:"".concat(R.a.btn," ").concat(R.a.search," ").concat(R.a.search_btn),onClick:function(){return e.searchCity(s),void u("")},children:n})]})})),P=n(16),Y=n.n(P),Q=function(e){var t=e.title,n=e.id,a=e.changeUnits,r=e.currentUnits===n?"active":"";return Object(L.jsx)("li",{className:"".concat(Y.a.item_units," ").concat(Y.a[r]),onClick:function(){a(n)},children:t})},H=Object(h.b)((function(e){return{units:e.units}}),(function(e){return{changeUnits:function(t){return e(function(e){return localStorage.setItem("units",e),{type:f,payload:e}}(t))}}}))((function(e){var t=e.units,n=e.changeUnits,a=t.currentUnits,r=t.metricList.map((function(e){return Object(L.jsx)(Q,{id:e.id,title:e.title,changeUnits:n,currentUnits:a},e.id)}));return Object(L.jsx)("div",{className:Y.a.units_container,children:Object(L.jsx)("ul",{className:Y.a.list_wrapper,children:r})})})),J=n(27),V=n.n(J),G=function(e){var t=e.onChangeBg,n=e.loading,a=e.getWeatherData,r=e.currentLang;return Object(L.jsxs)("header",{className:V.a.header_container,children:[Object(L.jsx)(N,{onChangeBg:t,loading:n}),Object(L.jsx)(U,{}),Object(L.jsx)(H,{}),Object(L.jsx)(F,{getWeatherData:a,currentLang:r})]})},K=n(8),X=n.n(K),z=function(e,t,n){return t?new Date(e).toLocaleString(n,{day:"numeric",month:"long",weekday:"short"}):new Date(e).toLocaleString(n,{weekday:"long"}).toUpperCase()},q=function(e,t){return[e.toFixed(2).toString().replace(/\./gm,"\xb0"),t.toFixed(2).toString().replace(/\./gm,"\xb0")]},Z=function(e){var t=e.date,n=e.isMain,a=e.lang,r=z(t,n,a);return Object(L.jsx)("p",{children:r})},$=n(28),ee=n.n($),te=function(e){return[e.getHours()<10?"0"+e.getHours():e.getHours(),e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()]},ne=function(){var e=Object(a.useState)(new Date),t=Object(k.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){var e=setInterval((function(){return r(new Date)}),1e3);return function(){clearInterval(e)}}),[n]);var c=te(n),i=Object(k.a)(c,2);return[i[0],i[1]]},ae=function(){var e=ne(),t=Object(k.a)(e,2),n=t[0],a=t[1];return Object(L.jsxs)("span",{className:ee.a.time,children:[n,":",a]})},re=n(29),ce=n.n(re),ie=n(17),oe=n.n(ie),se=function(e){var t=e.temp,n=e.icon,a=e.data,r=e.lang;return Object(L.jsxs)("div",{className:oe.a.item_contaner,children:[Object(L.jsx)(Z,{date:a,isMain:!1,lang:r}),Object(L.jsxs)("div",{className:oe.a.weather_data_wrapper,children:[Object(L.jsxs)("div",{className:oe.a.temp,children:[t,"\xb0"]}),Object(L.jsx)("div",{className:oe.a.sky_container,children:Object(L.jsx)("img",{src:"http://openweathermap.org/img/w/".concat(n,".png"),alt:"sky"})})]})]})},ue=function(e){var t=e.weatherList,n=e.lang,a=t.map((function(e){var t=e.data,a=e.icon,r=e.temp;return Object(L.jsx)(se,{data:t,icon:a,temp:r,lang:n},t)}));return Object(L.jsx)("div",{className:ce.a.weather_list_container,children:a})},le=Object(g.b)(Object(h.b)((function(e){return{weather:e.weather}})))((function(e){var t=Object(a.useContext)(W);if(!e.weather)return null;var n=e.currentLang,r=e.weather,c=r.cityName,i=r.country,o=r.weatherToday,s=o.data,u=o.description,l=o.feelsLike,d=o.humidity,g=o.temp,h=o.wind,_=o.icon,p=r.weatherList,j=t(n),b=j.feelsLikeText,m=j.windText,f=j.humidityText;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("h1",{className:X.a.title_city,children:[c,", ",i]}),Object(L.jsxs)("div",{className:X.a.date,children:[Object(L.jsx)(Z,{date:s,isMain:!0,lang:n}),Object(L.jsx)(ae,{})]}),Object(L.jsxs)("main",{className:X.a.main_container,children:[Object(L.jsxs)("div",{className:X.a.temp_wrapper,children:[Object(L.jsx)("span",{className:X.a.temp,children:g}),Object(L.jsx)("p",{className:X.a.degree,children:"\xb0"})]}),Object(L.jsxs)("div",{className:X.a.description_container,children:[Object(L.jsx)("div",{className:X.a.sky_container,children:Object(L.jsx)("img",{src:"http://openweathermap.org/img/w/".concat(_,".png"),alt:"sky"})}),Object(L.jsxs)("div",{className:X.a.description,children:[Object(L.jsx)("p",{children:u}),Object(L.jsxs)("p",{children:[b,": ",l,"\xb0"]}),Object(L.jsxs)("p",{children:[m,": ",h,"m/s"]}),Object(L.jsxs)("p",{children:[f,": ",d,"%"]})]})]})]}),Object(L.jsx)(ue,{weatherList:p,lang:n})]})})),de=n(30),ge=n.n(de),he=function(e){var t=e.left,n=e.right;return Object(L.jsxs)("div",{className:ge.a.row_container,children:[Object(L.jsx)("div",{children:t}),Object(L.jsx)("div",{children:n})]})},_e=n(20),pe=n.n(_e),je=n(33),be=Object(h.b)((function(e){var t;return{coord:null===(t=e.weather)||void 0===t?void 0:t.coord}}))((function(e){var t=e.coord,n=e.currentLang,r=Object(a.useContext)(W)(n),c=r.LatitudeText,i=r.LongitudeText;if(!t)return null;var o={center:{lat:t.lat,lng:t.lon},zoom:11},s=q(t.lat,t.lon),u=Object(k.a)(s,2),l=u[0],d=u[1];return Object(L.jsxs)("div",{className:pe.a.map_container,children:[Object(L.jsx)("div",{className:pe.a.map,children:Object(L.jsx)(je.a,{bootstrapURLKeys:{key:"AIzaSyDCcuXojv5SJwo3FVJ0SveOkxSvjcKy6-M"},defaultCenter:o.center,defaultZoom:o.zoom})}),Object(L.jsxs)("div",{className:pe.a.cord_wrapper,children:[Object(L.jsxs)("p",{children:[c,": ",l,"'"]}),Object(L.jsxs)("p",{children:[i,": ",d,"'"]})]})]})})),me=function(e){var t=e.bgImage,n=e.getImgBackground,a=e.loading,r=e.currentLang,c=e.getWeatherData;return Object(L.jsx)("div",{className:v.a.container_app+" "+v.a[t],children:Object(L.jsx)("div",{className:v.a.gradient_container,children:Object(L.jsxs)("div",{className:v.a.content_container,children:[Object(L.jsx)(G,{onChangeBg:n,loading:a,getWeatherData:c,currentLang:r}),Object(L.jsx)(he,{left:Object(L.jsx)(le,{currentLang:r}),right:Object(L.jsx)(be,{currentLang:r})})]})})})},fe=r.a.createContext(),xe=fe.Provider,Oe=fe.Consumer,Ae=function(e){return function(e){return function(t){return Object(L.jsx)(Oe,{children:function(n){return Object(L.jsx)(e,Object(o.a)(Object(o.a)({},t),{},{backgroundService:n}))}})}}},we=r.a.createContext(),ve=we.Provider,ye=we.Consumer,Ce=function(e){return function(e){return function(t){return Object(L.jsx)(ye,{children:function(n){return Object(L.jsx)(e,Object(o.a)(Object(o.a)({},t),{},{weatherService:n}))}})}}},Le=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getImgBackground(),this.props.getWeatherData()}},{key:"componentDidUpdate",value:function(e){(e.currentLang!==this.props.currentLang||e.currentUnits!==this.props.currentUnits||e.city!==this.props.city)&&this.props.getWeatherData(this.props.city)}},{key:"render",value:function(){return Object(L.jsx)(me,Object(o.a)({},this.props))}}]),n}(a.Component),Se=Object(g.b)(Ce(),Ae(),Object(h.b)((function(e){return{bgImage:e.backgroundApp,loading:e.loading,currentLang:e.language.currentLang,currentUnits:e.units.currentUnits,city:e.searchCity}}),(function(e,t){var n=t.backgroundService,a=t.weatherService;return{getImgBackground:function(){return O(n)(e)},getWeatherData:function(t){return A(a,t)(e)}}})))(Le),Ee={weather:null,loading:!0,error:null,backgroundApp:null,searchCity:"",units:{currentUnits:localStorage.getItem("units")?localStorage.getItem("units"):"metric",metricList:[{id:"imperial",title:"\xb0F"},{id:"metric",title:"\xb0\u0421"}]},language:{currentLang:localStorage.getItem("lang")?localStorage.getItem("lang"):"en",langList:[{id:"en",title:"EN"},{id:"ru",title:"RU"}]}},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(o.a)(Object(o.a)({},e),{},{weather:null,loading:!0,error:null});case p:return Object(o.a)(Object(o.a)({},e),{},{weather:t.payload,loading:!1});case j:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,error:t.payload});case b:return Object(o.a)(Object(o.a)({},e),{},{loading:!1,backgroundApp:t.payload});case m:return Object(o.a)(Object(o.a)({},e),{},{language:Object(o.a)(Object(o.a)({},e.language),{},{currentLang:t.payload})});case f:return Object(o.a)(Object(o.a)({},e),{},{units:Object(o.a)(Object(o.a)({},e.units),{},{currentUnits:t.payload})});case x:return Object(o.a)(Object(o.a)({},e),{},{searchCity:t.payload});default:return e}},Ne=n(32),ke=Object(g.c)(Ie,Object(g.a)(Ne.a)),Te=n(12),Be=n.n(Te),De=n(21),Ue=function(){return Object(L.jsx)("div",{children:"Something went wrong please try again later"})},Me=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(u.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(L.jsx)(Ue,{}):this.props.children}}]),n}(a.Component),Re=new function e(){var t=this;Object(s.a)(this,e),this._API_BASE="https://api.openweathermap.org/data/2.5/forecast?",this._API_KEY="f5744fa95be65ff2128fcd1cbe022f1d",this.fetchWeatherDataFromAPI=Object(De.a)(Be.a.mark((function e(){var n,a,r,c=arguments;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:"",a=c.length>1&&void 0!==c[1]?c[1]:"en",r=c.length>2&&void 0!==c[2]?c[2]:"metric",e.abrupt("return",new Promise((function(e,c){navigator.geolocation.getCurrentPosition(function(){var i=Object(De.a)(Be.a.mark((function i(o){var s;return Be.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,fetch("".concat(t._API_BASE,"q=").concat(n,"&lat=").concat(o.coords.latitude,"&lon=").concat(o.coords.longitude,"&lang=").concat(a,"&units=").concat(r,"&appid=").concat(t._API_KEY));case 2:(s=i.sent).ok||c(new Error("Could not fetch ".concat(t._API_BASE,", received ").concat(s.status))),e(s.json());case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())})));case 4:case"end":return e.stop()}}),e)}))),this.getFullDataWeather=function(){var e=Object(De.a)(Be.a.mark((function e(n){var a,r,c,i,o;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("lang")){e.next=7;break}return localStorage.setItem("lang","en"),localStorage.setItem("units","metric"),e.next=5,t.fetchWeatherDataFromAPI();case 5:return a=e.sent,e.abrupt("return",t._transformWeatherData(a));case 7:return r=localStorage.getItem("units"),c=localStorage.getItem("lang"),e.next=11,t.fetchWeatherDataFromAPI(n,c,r);case 11:return i=e.sent,o=t._transformWeatherData(i,c),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._transformWeatherData=function(e){var t=e.list.filter((function(e){return e.dt_txt.includes("18:00:00")})),n=t[0],a=t[1],r=t[2],c=t[3];return{cityName:e.city.name,country:e.city.country,coord:{lat:e.city.coord.lat,lon:e.city.coord.lon},weatherToday:{data:n.dt_txt,temp:Math.round(n.main.temp),description:n.weather[0].description,feelsLike:Math.round(n.main.feels_like),wind:n.wind.speed.toFixed(1),humidity:n.main.humidity,icon:n.weather[0].icon},weatherList:[{data:a.dt_txt,temp:Math.round(a.main.temp),icon:a.weather[0].icon},{data:r.dt_txt,temp:Math.round(r.main.temp),icon:r.weather[0].icon},{data:c.dt_txt,temp:Math.round(c.main.temp),icon:c.weather[0].icon}]}}},We=new function e(){Object(s.a)(this,e),this.getBackground=function(){var e=["bg1","bg2","bg3"];if(localStorage.getItem("bg")){var t=e.indexOf(localStorage.getItem("bg")),n=e.slice(t+1);return 0===n.length&&(n=[].concat(e)),localStorage.setItem("bg",n[0]),n[0]}return localStorage.setItem("bg",e[0]),e[0]}};i.a.render(Object(L.jsx)(h.a,{store:ke,children:Object(L.jsx)(Me,{children:Object(L.jsx)(W.Provider,{value:function(e){switch(e){case"en":return{searchBtnText:"SEARCH",inputPlaceText:"Search city",incorrectInputPlaceText:"Enter the correct request",feelsLikeText:"FEELS LIKE",windText:"WIND",humidityText:"HUMIDITY",LatitudeText:"Latitude",LongitudeText:"Longitude"};case"ru":return{searchBtnText:"\u041f\u041e\u0418\u0421\u041a",inputPlaceText:"\u041f\u043e\u0438\u0441\u043a \u0433\u043e\u0440\u043e\u0434\u0430",incorrectInputPlaceText:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441",feelsLikeText:"\u041e\u0429\u0423\u0429\u0410\u0415\u0422\u0421\u042f \u041a\u0410\u041a",windText:"\u0412\u0415\u0422\u0415\u0420",humidityText:"\u0412\u041b\u0410\u0416\u041d\u041e\u0421\u0422\u042c",LatitudeText:"\u0428\u0438\u0440\u043e\u0442\u0430",LongitudeText:"\u0414\u043e\u043b\u0433\u043e\u0442\u0430"};default:return}},children:Object(L.jsx)(ve,{value:Re,children:Object(L.jsx)(xe,{value:We,children:Object(L.jsx)(Se,{})})})})})}),document.getElementById("root"))}],[[43,1,2]]]);
//# sourceMappingURL=main.906fd94a.chunk.js.map